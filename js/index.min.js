window.addEventListener("load",()=>{let productDB=self.indexedDB.open("productDB",1);productDB.onerror=()=>{console.log("productDB Database failed to open")},productDB.onsuccess=()=>{console.log("productDB Database opened successfully"),db=productDB.result,displayProducts()};const displayProducts=()=>{let products=document.querySelector(".products"),prod="",objectStore;db.transaction(["products"],"readonly").objectStore("products").openCursor().onsuccess=e=>{let cursor=e.target.result;if(cursor){let img=imageExists(cursor.value.img);prod+=`<div class="product">\n\t\t\t\t\t\t\t\t\t<a href="productDetails.html" id="${cursor.value.id}" onClick=myFunc(this.id)>\n\t\t\t\t\t\t\t\t\t\t<img src="img/${img}" alt="${cursor.value.name}">\n\t\t\t\t\t\t\t\t\t\t<p>${cursor.value.name}</p>\n\t\t\t\t\t\t\t\t\t\t<span>NGN${cursor.value.price}.00</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t</div>`,cursor.continue()}products.innerHTML=prod}}});const myFunc=id=>{localStorage.setItem("index",id)};function imageExists(url){return url.includes("fakepath")?"no_logo.gif":`img/${url}`?`${url}`:void 0}
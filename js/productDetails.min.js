function imageExists(url){return url.includes("fakepath")?"no_logo.gif":`img/${url}`?`${url}`:void 0}document.getElementById("buyer_name").onkeypress=e=>{if(-1==="abcdefghijklmnopqrstuvwxyz ".indexOf(String.fromCharCode(e.keyCode)))return e.preventDefault(),!1},document.getElementById("buyer_country").onkeypress=e=>{if(-1==="abcdefghijklmnopqrstuvwxyz ".indexOf(String.fromCharCode(e.keyCode)))return e.preventDefault(),!1},window.onload=()=>{let prodImg=document.querySelector("#prodImg"),prodName=document.querySelector(".prodName"),index=localStorage.getItem("index"),db;localStorage.removeItem("index");let productDB=indexedDB.open("productDB",1);productDB.onerror=()=>{console.log("productDB Database failed to open")},productDB.onsuccess=()=>{db=event.target.result;let transaction=db.transaction(["products"],"readonly"),objectStore;transaction.onsuccess=function(event){console.log("[Transaction] ALL DONE!")},transaction.objectStore("products").get(Number.parseInt(index)).onsuccess=function(event){let res=event.target.result,img=imageExists(res.img);prodImg.src=`img/${img}`,prodName.textContent=res.name,localStorage.setItem("id",res.id),localStorage.setItem("prodName",res.name),localStorage.setItem("prodImage",img),localStorage.setItem("prodPrice",res.price)}}};const userDetails=e=>{e.preventDefault();let buyer_name=document.querySelector("#buyer_name").value,buyer_country=document.querySelector("#buyer_country").value,num_of_items=document.querySelector("#num_of_items").value;localStorage.setItem("buyer_name",buyer_name),localStorage.setItem("buyer_country",buyer_country),localStorage.setItem("num_of_items",num_of_items),window.location.replace("./makePayment.html")};let buyerDetails=document.querySelector("#buyerDetails");buyerDetails.addEventListener("submit",userDetails);